<ng-container *ngIf="configService.config$ | async as config">
  <!-- DEFAULT BRANCHES -->
  <div class="branch-container-heading">
    <h2 class="branch-type-heading">Default Branches</h2>
  </div>
  <div class="branches-list">
    <idc-branch-container
      *ngFor="
        let branch of branchesFacade.defaultBranches$ | async;
      "
      [branch]="branch"
    ></idc-branch-container>
  </div>

  <!-- DEPLOYED BRANCHES -->
  <div class="branch-container-heading">
    <h2 class="branch-type-heading">Deployed Branches</h2>
    <button
      *ngIf="config.deployedBranches === DisplayType.Collapsed"
      type="button"
      class="unfold-view"
      (click)="
        configService.setConfig({ deployedBranches: DisplayType.Expanded })
      "
    >
      <svg height="1.5rem" width="1.5rem" class="svg-icon expand">
        <use href="assets/icons.svg#expand"></use>
      </svg>
    </button>
    <button
      *ngIf="config.deployedBranches === DisplayType.Expanded"
      type="button"
      class="fold-view"
      (click)="
        configService.setConfig({ deployedBranches: DisplayType.Collapsed })
      "
    >
      <svg height="1.5rem" width="1.5rem" class="svg-icon collapse">
        <use href="assets/icons.svg#collapse"></use>
      </svg>
    </button>
  </div>
  <div class="branches-list">
    <idc-branch-container
      *ngFor="
        let branch of branchesFacade.deployedBranches$ | async;
        trackBy: trackByBranchName
      "
      [viewType]="config.deployedBranches"
      [branch]="branch"
    ></idc-branch-container>
  </div>

  <!-- TRACKED BRANCHES -->
  <div class="branch-container-heading">
    <h2 class="branch-type-heading">Tracked Branches</h2>
    <button
      *ngIf="config.trackedBranches === DisplayType.Collapsed"
      type="button"
      class="unfold-view"
      (click)="
        configService.setConfig({ trackedBranches: DisplayType.Expanded })
      "
    >
      <svg height="1.5rem" width="1.5rem" class="svg-icon expand">
        <use href="assets/icons.svg#expand"></use>
      </svg>
    </button>
    <button
      *ngIf="config.trackedBranches === DisplayType.Expanded"
      type="button"
      class="fold-view"
      (click)="
        configService.setConfig({ trackedBranches: DisplayType.Collapsed })
      "
    >
      <svg height="1.5rem" width="1.5rem" class="svg-icon collapse">
        <use href="assets/icons.svg#collapse"></use>
      </svg>
    </button>
  </div>
  <div class="branches-list">
    <idc-branch-container
      *ngFor="
        let branch of branchesFacade.trackedBranches$ | async;
        trackBy: trackByBranchName
      "
      [viewType]="config.trackedBranches"
      [branch]="branch"
      (untrackBranch)="untrackBranch($event)"
    ></idc-branch-container>
  </div>

  <!-- OTHER BRANCHES -->
  <div class="branch-container-heading">
    <h2 class="branch-type-heading other-branches">Other Branches</h2>
    <button
      *ngIf="config.untrackedBranches === DisplayType.Collapsed"
      type="button"
      class="unfold-view"
      (click)="
        configService.setConfig({ untrackedBranches: DisplayType.Expanded })
      "
    >
      <svg height="1.5rem" width="1.5rem" class="svg-icon expand">
        <use href="assets/icons.svg#expand"></use>
      </svg>
    </button>
    <button
      *ngIf="config.untrackedBranches === DisplayType.Expanded"
      type="button"
      class="fold-view"
      (click)="
        configService.setConfig({ untrackedBranches: DisplayType.Collapsed })
      "
    >
      <svg height="1.5rem" width="1.5rem" class="svg-icon collapse">
        <use href="assets/icons.svg#collapse"></use>
      </svg>
    </button>
  </div>
  <div class="branches-list">
    <idc-branch-container
      *ngFor="
        let branch of branchesFacade.untrackedBranches$ | async;
        trackBy: trackByBranchName
      "
      [viewType]="config.untrackedBranches"
      [branch]="branch"
      (trackBranch)="trackBranch($event)"
    ></idc-branch-container>
  </div>
</ng-container>
